------------------------------------------------------------------------

title: "Penguin_Analysis" author: '\~' date: "2024-12-03" output: pdf_document: default html_document: default

Setting Up- if not already installed, please copy this code directly into the console: `` install.packages(c(tidyverse,palmerpenguins,ggplot2,here,janitor,tinytex, knitr, kableExtra)` ``

```{r}
library(tidyverse) #organises data 
library(palmerpenguins) #contains our desired data set
library(ggplot2) #creates graphs
library(here) #finds files
library(janitor) #cleaning data 
library(tinytex) #creates PDF of the Rmd
library(knitr) #creates 
library(kableExtra)# additional formatting for results tables
```

### QUESTION 01: Data **Visualisation** for Science Communication

a)  Poor Figure

Aim- Create a figure using the `Palmer Penguin ()` data set that is correct but badly communicates the data.

```{r bad figure code, echo=FALSE}
#Unclear Figure
plot(
  penguins$flipper_length_mm, 
  penguins$body_mass_g,
  pch = 3,  # Hard-to-read symbols
  col = rainbow(3)[as.numeric(penguins$species)], 
  main = "Body Mass vs. Flipper Length",  
  xlab = "Length",  
  ylab = "Body Mass",  
  xlim = c(0, 300),  # large axis range
  ylim = c(0, 8000),  # large axis range 
  cex = 5  # Overly large points
)

```

b)  Write about how your design choices mislead the reader about the underlying data (100-300 words).

Investigating the relationship between flipper length and body weight is a legitimate scientific question. However, how this plot visualises the data could be clearer and more accurate. In terms of graph formatting the axes labels are brief and do not show the units for example. It could be argued that the scale is also inappropriate as all the data is between 150 and 250 cm and yet the scale is from 0-300 which makes it harder to observe any differences between the penguins. This is also somewhat the case for the other axis meaning that the isn't reflective of the actual data distribution. Although different colors for the three different penguin species are theoretically useful without a key it is not possible to differentiate between them.

### QUESTION 2: Data Pipeline

Aim - Write a data analysis pipeline in your .rmd RMarkdown file. You should be aiming to write a clear explanation of the steps as well as clear code. Your code should include the steps practiced in the lab session

#### Introduction

Data pipelines are used to

#### Hypothesis

#### Method

a)  Load the data

```{r}
# Load the cleaning function from the script
source(here("functions", "cleaning.R"))

# Preserve the raw dataset by saving it
write_csv(penguins_raw, here("data", "penguin_raw.csv"))

# Clean the dataset using the function
penguins_clean <- cleaning_penguins(penguins_raw) 

# Save the cleaned dataset
write_csv(penguins_clean, here("data", "penguins_clean.csv"))

# Verify changes by printing the column names
colnames(penguins_clean)


```

b)  Create an Exploratory Figure (not a boxplot) Aim- An exploratory figure shows raw data, such as the distribution of the data.

```{r}
exploratory_plot <- ggplot(penguins_clean, aes(x = body_mass_g, y = flipper_length_mm, color = species)) +
  geom_point(alpha = 0.7, size = 3) +  # Add transparency to avoid overlapping points
  labs(
    title = "Body Mass vs Flipper Length",
    x = "Body Mass (g)",
    y = "Flipper Length (mm)",
    color = "Species"
  ) +
  theme_minimal() +  # Use a minimal theme for a clean look
  theme(legend.position = c(0.8, 0.2))
 



# Display the plot
print(exploratory_plot)
```

Figure One- Plotting the relationship between Body mas (g) and Flipper length (mm)

This shows the spread of trait values for flipper length (mm) with respect to body size. Within this I've also visualised how these vary between species. The data shows large overlap between Chinstrap and Adelie penguin species with generally smaller flipper length and then a more distinct, larger flipper in the Gentoo penguins.

d)  Run a statistical test

```{r}
# Perform ANOVA
statistical_test <- aov(flipper_length_mm ~ species, data = penguins_clean)
anova_summary <- summary(statistical_test)

# Extract the ANOVA table
anova_table <- as.data.frame(anova_summary[[1]])  # Convert the summary to a data frame
penguins_clean$species <- as.factor(penguins_clean$species)
# Use kable to display the table
kable(
  anova_table, 
  col.names = c("Df", "Sum Sq", "Mean Sq", "F value", "Pr(>F)"),  # Customize column names
  caption = "ANOVA Table for Flipper Length by Species", 
  format = "html"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover", "condensed", "responsive"), 
    full_width = FALSE, 
    position = "center"
  ) %>%
  column_spec(1, bold = TRUE) %>% 
  row_spec(0, background = "#D3D3D3")  # Highlight header row

```

The ANOVA conducted was a one way analysis of vairance to determine if there was a significant difference between the flipper length of the 3 penguin species.

d)  Create a Results Figure Aim- A results figure demonstrates the stats method chosen, and includes the results of the stats test or model.

```{r}
Refined_Plot <- ggplot(
  data = penguins_clean, 
  aes(x = species, y = flipper_length_mm, fill = species)) +
  geom_violin(trim = FALSE, color = "black") + 
  geom_jitter(width = 0.2, size = 1, color = "black", alpha = 0.6) + # Add jittered points
  labs(
    title = "Distribution of Flipper Length by Species",
    x = "Species", 
    y = "Flipper Length (mm)"
  ) +
  theme_minimal() + 
  theme(
    axis.text.x = element_blank(),  # Remove x-axis tick labels
    axis.ticks.x = element_blank()  # Remove x-axis tick marks
  )

# Print the plot
Refined_Plot
```

Figure Two - Plotting the flipper length (mm) of the penguin species

This aims to show how the trait values (flipper length) vary in a species specific way.

### QUESTION 3: Open Science

[GitHub Upload your R-Project you created for Question 2]{.underline}

My Github repository:<https://github.com/Fungal03/Penguin_Project/blob/main/Penguin_Analysis.Rmd>

[Share your repo with a partner, download, and try to run their data pipeline. Partner’s GitHub link]{.underline}

My partners Github repository:[https://github.com/dinosaur84/ReproducibleScienceAndFigures/blob/main/ReproducibleScience0AndFiguresAssignment.Rmd](https://github.com/dinosaur84/ReproducibleScienceAndFigures/blob/main/ReproducibleScienceAndFiguresAssignment.Rmd){.uri}

#### a) Reflect on your experience running their code. (300-500 words)

What elements of your partner’s code helped you to understand and run their data pipeline?

Did it run? Did you need to fix anything?

What suggestions would you make for improving their code to make it more understandable or reproducible, and why?

If you needed to alter your partner’s figure using their code, do you think that would be easy or difficult, and why?

#### b) Reflect on your own code based on your experience with your partner’s code and their review of yours. (300-500 words)

What improvements did they suggest, and do you agree?

What did you learn about writing code for other people?

#### c) What are the main barriers for scientists to share their data and code, and what could be done to overcome them? (500-700 words)

• Maitner et al. Code sharing increases citations, but remains uncommon. <https://doi.org/10.21203/rs.3.rs3222221/v1>

• Trisovic et al. A large-scale study on research code quality and execution. <https://rdcu.be/dZB7x>

• A Rock-Star Researcher Spun a Web of Lies—and Nearly Got Away with It. <https://thewalrus.ca/arock-star-researcher-spun-a-web-of-lies-and-nearly-got-away-with-it/>

• Gomes et al. Why don’t we share data and code? Perceived barriers and benefits to public archiving practices <https://doi.org/10.1098/rspb.2022.1113> 3
